<!-- components/sidebar.html -->
<div id="sidebar" class="w-20 h-screen text-white py-6 px-4 flex flex-col fixed transition-all duration-300 ease-in-out hover:w-64 z-10" style="background: linear-gradient(135deg, #5e3fa0 0%, #7b5dbd 100%)">
  <!-- Logo -->
  <div class="flex items-center mb-8 px-2 whitespace-nowrap overflow-hidden">
    <i class="fas fa-chart-line text-2xl mr-3 flex-shrink-0"></i>
    <h1 class="text-xl font-bold sidebar-text opacity-0 transition-opacity duration-300">Legacy Maturity</h1>
  </div>

  <!-- Navigation -->
  <nav class="flex-1">
    <ul class="space-y-2">
      <li>
        <a href="{{ url_for('main.index') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden">
          <i class="fas fa-home w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Home</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.dashboard') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden">
          <i class="fas fa-tachometer-alt w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Dashboard</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.create_system') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden">
          <i class="fas fa-plus-circle w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">New System</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.financial_security', system_id=1) }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden">
          <i class="fas fa-dollar-sign w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Financial Assessment</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.choose_recommendation') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden">
          <i class="fas fa-lightbulb w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Recommendations</span>
        </a>
      </li>

      <!-- Bottom items now in the same list -->
      <li>
        <a href="{{ url_for('main.maturity_levels_explained') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden {% if request.endpoint == 'main.maturity_levels_explained' %}bg-white/20{% endif %}">
          <i class="fas fa-layer-group w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Maturity Levels</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.scoring_methodology') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden {% if request.endpoint == 'main.scoring_methodology' %}bg-white/20{% endif %}">
          <i class="fas fa-calculator w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Scoring Method</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.recommendations_explained') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden {% if request.endpoint == 'main.recommendations_explained' %}bg-white/20{% endif %}">
          <i class="fas fa-cogs w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Recs Explained</span>
        </a>
      </li>
      <li>
        <a href="{{ url_for('main.about') }}" class="sidebar-link flex items-center py-2 px-4 rounded text-white hover:bg-white/10 whitespace-nowrap overflow-hidden {% if request.endpoint == 'main.about' %}bg-white/20{% endif %}">
          <i class="fas fa-info-circle w-6 flex-shrink-0"></i>
          <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">About</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Dark Mode Toggle -->
  <div class="mt-auto pt-4 border-t border-purple-400/30">
    <button onclick="toggleDarkMode()" class="flex items-center py-2 px-4 rounded w-full text-white hover:bg-white/10 sidebar-link whitespace-nowrap overflow-hidden">
      <i id="darkModeIcon" class="fas fa-sun w-6 flex-shrink-0"></i>
      <span class="sidebar-text ml-2 opacity-0 transition-opacity duration-300">Light Mode</span>
    </button>
  </div>
</div>

<style>
  /* Show text when sidebar is hovered */
  #sidebar:hover .sidebar-text {
    opacity: 1;
  }

  /* Default collapsed content margin = 5rem */
  #main-content {
    margin-left: 5rem;
    transition: margin-left 0.3s ease-in-out;
  }
  /* When expanded (16rem) */
  #sidebar:hover + #main-content {
    margin-left: 16rem;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const sidebar = document.getElementById('sidebar')
    const sidebarTexts = document.querySelectorAll('.sidebar-text')

    sidebar.addEventListener('mouseenter', function () {
      sidebar.classList.replace('w-20', 'w-64')
      setTimeout(() => {
        sidebarTexts.forEach(t => (t.style.opacity = '1'))
      }, 100)
    })

    sidebar.addEventListener('mouseleave', function () {
      sidebarTexts.forEach(t => (t.style.opacity = '0'))
      setTimeout(() => {
        sidebar.classList.replace('w-64', 'w-20')
      }, 100)
    })
  })
</script>
